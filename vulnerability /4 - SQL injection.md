## SQL injection

برای پیدا کردن آسیب‌پذیری SQL Injection در تست نفوذ وب، باید ورودی‌های کاربر را که در ساخت کوئری‌های SQL استفاده می‌شوند، هدف قرار دهید و با تزریق داده‌های خاص، رفتار غیرعادی یا خطاهای دیتابیس را بررسی کنید. روش‌های اصلی به شرح زیر است:

مراحل پیدا کردن آسیب‌پذیری SQL Injection
1. شناسایی نقاط ورودی به دیتابیس
فرم‌های ورود (Login)

فیلدهای جستجو

پارامترهای URL (GET یا POST)

هدرها و کوکی‌ها

هر جایی که داده کاربر وارد کوئری SQL می‌شود

2. تست دستی با تزریق کاراکترهای خاص
در ورودی‌ها کاراکترهایی مانند ' (کوتیشن تکی) یا ; (سمی‌کالن) وارد کنید.

اگر برنامه خطای دیتابیس نشان داد یا رفتار غیرعادی داشت، احتمال آسیب‌پذیری وجود دارد.

3. استفاده از پیلودهای رایج SQL Injection
وارد کردن عبارات شرطی مثل:

```bash
' OR 1=1 --
' OR 'a'='a
```

این عبارات باعث می‌شوند شرط SQL همیشه درست شود و اگر آسیب‌پذیر باشد، مثلاً در فرم ورود، می‌توانید بدون داشتن رمز عبور وارد شوید.

4. بررسی پاسخ سرور
مشاهده پیام‌های خطا مانند پیام‌های SQL syntax error

تغییر در محتوای صفحه یا داده‌های نمایش داده شده

تغییر در زمان پاسخ (برای تست Blind SQL Injection)

5. تست Blind SQL Injection
ارسال کوئری‌هایی که بر اساس شرط درست یا نادرست، پاسخ متفاوت یا تاخیر زمانی ایجاد می‌کنند.

مثال:

```bash
' OR IF(SUBSTRING(@@version,1,1)='5', SLEEP(5), 0) --
```
اگر پاسخ با تاخیر همراه بود، آسیب‌پذیری تایید می‌شود.

6. استفاده از ابزارهای اتوماتیک
Burp Suite: با استفاده از Burp Intruder یا Burp Scanner می‌توانید پارامترها را با پیلودهای SQL تزریق کنید و پاسخ‌ها را تحلیل کنید.

SQLMap: ابزار قدرتمند خط فرمان برای شناسایی و بهره‌برداری از SQL Injection.

OWASP ZAP: اسکنر امنیتی رایگان با قابلیت شناسایی SQLi.

7. بررسی انواع مختلف SQL Injection
Error-based: بر اساس پیام خطا

Boolean-based Blind: بر اساس پاسخ True/False

Time-based Blind: بر اساس تاخیر در پاسخ

Union-based: استفاده از UNION برای استخراج داده‌ها

مثال ساده تست دستی
فرض کنید پارامتر id در URL وجود دارد:

```bash
http://example.com/product?id=1
```
ابتدا مقدار 1' را وارد کنید:

```bash
http://example.com/product?id=1'
```
اگر خطای SQL دریافت کردید، احتمال آسیب‌پذیری وجود دارد.

سپس مقدار زیر را تست کنید:

```bash
http://example.com/product?id=1 OR 1=1 --
```
اگر صفحه تغییر کرد یا داده‌های بیشتری نمایش داده شد، آسیب‌پذیری تایید می‌شود.

منابع معتبر برای مطالعه بیشتر
راهنمای تست SQL Injection در OWASP

آموزش تست SQL Injection با Burp Suite

SQL Injection در PortSwigger Web Security Academy

جمع‌بندی
SQL Injection زمانی رخ می‌دهد که ورودی کاربر بدون اعتبارسنجی مناسب در کوئری SQL استفاده شود.

با تزریق کاراکترهای خاص و پیلودهای شرطی، می‌توانید آسیب‌پذیری را شناسایی کنید.

استفاده از ابزارهای اتوماتیک مثل Burp Suite و SQLMap روند تست را سریع‌تر و دقیق‌تر می‌کند.

بررسی انواع مختلف SQLi (Error-based، Blind، Union-based) ضروری است.

با رعایت این مراحل می‌توانید به طور جامع آسیب‌پذیری SQL Injection را در تست نفوذ وب شناسایی کنید.
